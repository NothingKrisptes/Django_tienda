{% extends 'tienda/base.html' %}

{% block content %}
<div class="form-container">
    
    <div class="form-header">
        <h2>Nuevo Vinilo</h2>
        <p>Ingresa los detalles para el catálogo digital.</p>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- FILA 1: TÍTULO Y ARTISTA -->
        <div class="row">
            <div class="col">
                <label>{{ form.tituloDisco.label }}</label>
                {{ form.tituloDisco }}
            </div>
            <div class="col">
                <label>{{ form.artistaPrincipal.label }}</label>
                {{ form.artistaPrincipal }}
            </div>
        </div>

        <!-- FILA 2: PRECIOS Y STOCK -->
        <div class="row three-col">
            <div class="col">
                <label>Precio de Venta ($)</label>
                {{ form.precioUnitario }}
            </div>
            
            <div class="col">
                <label>% Oferta (0 = Sin descuento)</label>
                {{ form.porcentajeDescuento }}
            </div>

            <div class="col">
                <label>Stock Disponible</label>
                {{ form.stockDisponible }}
            </div>
        </div>

        <!-- FILA 3: GÉNERO (DATALIST) -->
        <div class="row">
            <div class="col">
                <label>{{ form.categoria.label }}</label>
                {{ form.categoria }}
                <!-- Las opciones del datalist se cargan automáticamente si el widget en forms.py tiene list="lista-generos" -->
                <datalist id="lista-generos">
                    <option value="Rock Clásico">
                    <option value="Jazz">
                    <option value="Blues">
                    <option value="Pop">
                    <option value="Salsa">
                    <option value="Heavy Metal">
                    <option value="Reggae">
                    <option value="Hip Hop">
                    <option value="Clásica">
                    <option value="Electrónica">
                    <option value="Indie">
                    <option value="Folk">
                    <option value="Soul">
                    <option value="Pasillo Ecuatoriano">
                    <option value="Bolero">
                </datalist>
                <small style="color: #888;">Escribe tu propio género o selecciona uno de la lista.</small>
            </div>
        </div>
        
        <!-- SECCIÓN IMÁGENES -->
        <div class="image-section">
            <label class="section-label">Imagen de Portada (Elige una opción)</label>
            
            <div class="image-options">
                <div class="option">
                    <strong>Opción A: Subir archivo</strong>
                    {{ form.imagenPortada }}
                </div>
                
                <div class="divider">O</div>
                
                <div class="option">
                    <strong>Opción B: Pegar enlace web</strong>
                    {{ form.imagenUrl }}
                </div>
            </div>
        </div>

        <!-- CHECKBOXES -->
        <div class="checkbox-group">
            <div class="checkbox-item">
                {{ form.esNuevo }}
                <label for="{{ form.esNuevo.id_for_label }}">¿Es Nuevo?</label>
            </div>

            <div class="checkbox-item">
                {{ form.aceptaDevolucion }}
                <label for="{{ form.aceptaDevolucion.id_for_label }}">¿Acepta Devolución?</label>
            </div>
        </div>

        <!-- BOTONES -->
        <div class="actions">
            <a href="{% url 'catalogo' %}" class="btn-cancel">CANCELAR</a>
            <button type="submit" class="btn-save">GUARDAR PRODUCTO</button>
        </div>
    </form>
</div>

<!-- ESTILOS LOCALES MEJORADOS -->
<style>
    /* Contenedor Principal */
    .form-container {
        max-width: 800px;
        margin: 40px auto;
        background: #fff;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        border-top: 5px solid var(--acento);
        font-family: 'Lato', sans-serif;
    }

    .form-header { text-align: center; margin-bottom: 30px; }
    .form-header h2 { 
        font-family: 'Playfair Display', serif; 
        color: var(--secundario); 
        margin-bottom: 5px; 
    }
    .form-header p { color: #666; margin-top: 0; }

    /* Grillas */
    .row { display: flex; gap: 20px; margin-bottom: 20px; }
    .three-col > .col { flex: 1; }
    .col { flex: 1; display: flex; flex-direction: column; }

    /* Inputs */
    label { 
        font-weight: bold; 
        color: var(--secundario); 
        font-size: 0.9rem; 
        margin-bottom: 5px; 
    }
    input[type="text"], input[type="number"], input[type="url"], select {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box; /* Importante para que no se salga */
    }

    /* Sección Imágenes */
    .image-section {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 6px;
        border: 1px dashed #ccc;
        margin-bottom: 25px;
    }
    .section-label { display: block; margin-bottom: 15px; }
    .image-options { display: flex; align-items: center; gap: 20px; }
    .option { flex: 1; }
    .option strong { display: block; margin-bottom: 5px; font-size: 0.85rem; color: #555; }
    .divider { font-weight: bold; color: #ccc; }

    /* Checkboxes */
    .checkbox-group {
        display: flex;
        gap: 40px;
        padding: 15px;
        background: #fff;
        border: 1px solid #eee;
        border-radius: 4px;
        margin-bottom: 30px;
    }
    .checkbox-item { display: flex; align-items: center; gap: 10px; cursor: pointer; }
    .checkbox-item input { width: 20px; height: 20px; cursor: pointer; }
    .checkbox-item label { margin: 0; cursor: pointer; color: var(--secundario); }

    /* Botones */
    .actions { display: flex; gap: 15px; }
    .btn-cancel {
        flex: 1;
        text-align: center;
        padding: 12px;
        border: 1px solid #ccc;
        background: #fff;
        color: #666;
        text-decoration: none;
        border-radius: 4px;
        font-weight: bold;
    }
    .btn-save {
        flex: 2;
        padding: 12px;
        background: var(--acento);
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
    }
    .btn-save:hover { background: #d65a3b; }
    .btn-cancel:hover { background: #f5f5f5; }

    /* Ajuste para móvil */
    @media (max-width: 600px) {
        .row { flex-direction: column; }
        .image-options { flex-direction: column; text-align: center; }
        .divider { margin: 10px 0; }
    }
</style>
{% endblock %}
