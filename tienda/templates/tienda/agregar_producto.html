{% extends 'tienda/base.html' %}

{% block content %}
<div class="form-container">
    
    <div class="form-header">
        <h2>Nuevo Vinilo</h2>
        <p>Ingresa los detalles para el cat谩logo digital.</p>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- FILA 1: TTULO Y ARTISTA -->
        <div class="row">
            <div class="col">
                <label>{{ form.tituloDisco.label }}</label>
                {{ form.tituloDisco }}
            </div>
            <div class="col">
                <label>{{ form.artistaPrincipal.label }}</label>
                {{ form.artistaPrincipal }}
            </div>
        </div>

        <!-- FILA 2: PRECIOS Y STOCK -->
        <div class="row three-col">
            <div class="col">
                <label>Precio de Venta ($)</label>
                {{ form.precioUnitario }}
            </div>
            
            <div class="col">
                <label>% Oferta (0 = Sin descuento)</label>
                {{ form.porcentajeDescuento }}
            </div>

            <div class="col">
                <label>Stock Disponible</label>
                {{ form.stockDisponible }}
            </div>
        </div>

        <!-- FILA 3: GNERO (DATALIST CORREGIDO) -->
        <div class="row">
            <div class="col">
                <label>{{ form.categoria.label }}</label>
                {{ form.categoria }}
                <datalist id="lista-generos">
                    <option value="Rock Cl谩sico">
                    <option value="Jazz">
                    <option value="Blues">
                    <option value="Pop">
                    <option value="Salsa">
                    <option value="Heavy Metal">
                    <option value="Reggae">
                    <option value="Hip Hop">
                    <option value="Cl谩sica">
                    <option value="Electr贸nica">
                    <option value="Indie">
                    <option value="Folk">
                    <option value="Soul">
                    <option value="Pasillo Ecuatoriano">
                    <option value="Bolero">
                </datalist>
                <small style="color: #888;">Escribe tu propio g茅nero o selecciona uno de la lista.</small>
            </div>
        </div>

        <!-- SECCIN: INFORMACIN DEL LBUM -->
        <div class="section-divider">
            <h3 style="margin: 0; color: var(--secundario); font-size: 1.1rem;"> Informaci贸n del lbum</h3>
        </div>

        <div class="row">
            <div class="col">
                <label>Descripci贸n del lbum</label>
                {{ form.descripcion }}
                <small style="color: #888;">Historia del disco, contexto, premios, etc.</small>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label>Lista de Canciones</label>
                {{ form.listaCanciones }}
                <small style="color: #888;">Una canci贸n por l铆nea (Ej: 1. Nombre Canci贸n)</small>
            </div>
        </div>
        
        <!-- SECCIN IMGENES -->
        <div class="image-section">
            <label class="section-label">Imagen de Portada (Elige una opci贸n)</label>
            
            <div class="image-options">
                <div class="option">
                    <strong>Opci贸n A: Subir archivo</strong>
                    {{ form.imagenPortada }}
                </div>
                
                <div class="divider">O</div>
                
                <div class="option">
                    <strong>Opci贸n B: Pegar enlace web</strong>
                    {{ form.imagenUrl }}
                </div>
            </div>
        </div>

        <!-- CHECKBOXES -->
        <div class="checkbox-group">
            <div class="checkbox-item">
                {{ form.esNuevo }}
                <label for="{{ form.esNuevo.id_for_label }}">驴Es Nuevo?</label>
            </div>

            <div class="checkbox-item">
                {{ form.aceptaDevolucion }}
                <label for="{{ form.aceptaDevolucion.id_for_label }}">驴Acepta Devoluci贸n?</label>
            </div>
        </div>

        <!-- BOTONES -->
        <div class="actions">
            <a href="{% url 'catalogo' %}" class="btn-cancel">CANCELAR</a>
            <button type="submit" class="btn-save">GUARDAR PRODUCTO</button>
        </div>
    </form>
</div>

<!-- ESTILOS LOCALES MEJORADOS -->
<style>
    /* Contenedor Principal */
    .form-container {
        max-width: 900px;
        margin: 40px auto;
        background: #fff;
        padding: 40px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        border-top: 5px solid var(--acento);
        font-family: 'Lato', sans-serif;
    }

    .form-header { text-align: center; margin-bottom: 30px; }
    .form-header h2 { 
        font-family: 'Playfair Display', serif; 
        color: var(--secundario); 
        margin-bottom: 5px; 
    }
    .form-header p { color: #666; margin-top: 0; }

    /* Divisor de secciones */
    .section-divider {
        border-top: 2px solid #eee;
        padding-top: 25px;
        margin: 30px 0 20px 0;
    }

    /* Grillas */
    .row { display: flex; gap: 20px; margin-bottom: 20px; }
    .three-col > .col { flex: 1; }
    .col { flex: 1; display: flex; flex-direction: column; }

    /* Inputs */
    label { 
        font-weight: bold; 
        color: var(--secundario); 
        font-size: 0.9rem; 
        margin-bottom: 5px; 
    }
    input[type="text"], input[type="number"], input[type="url"], select, textarea {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box;
        font-family: 'Lato', sans-serif;
    }

    textarea {
        min-height: 100px;
        resize: vertical;
    }

    /* Secci贸n Im谩genes */
    .image-section {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 6px;
        border: 1px dashed #ccc;
        margin-bottom: 25px;
    }
    .section-label { display: block; margin-bottom: 15px; font-weight: bold; }
    .image-options { display: flex; align-items: center; gap: 20px; }
    .option { flex: 1; }
    .option strong { display: block; margin-bottom: 5px; font-size: 0.85rem; color: #555; }
    .divider { font-weight: bold; color: #ccc; }

    /* Checkboxes */
    .checkbox-group {
        display: flex;
        gap: 40px;
        padding: 15px;
        background: #fff;
        border: 1px solid #eee;
        border-radius: 4px;
        margin-bottom: 30px;
    }
    .checkbox-item { display: flex; align-items: center; gap: 10px; cursor: pointer; }
    .checkbox-item input { width: 20px; height: 20px; cursor: pointer; }
    .checkbox-item label { margin: 0; cursor: pointer; color: var(--secundario); }

    /* Botones */
    .actions { display: flex; gap: 15px; }
    .btn-cancel {
        flex: 1;
        text-align: center;
        padding: 12px;
        border: 1px solid #ccc;
        background: #fff;
        color: #666;
        text-decoration: none;
        border-radius: 4px;
        font-weight: bold;
    }
    .btn-save {
        flex: 2;
        padding: 12px;
        background: var(--acento);
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
    }
    .btn-save:hover { background: #d65a3b; }
    .btn-cancel:hover { background: #f5f5f5; }

    /* Ajuste para m贸vil */
    @media (max-width: 600px) {
        .row { flex-direction: column; }
        .image-options { flex-direction: column; text-align: center; }
        .divider { margin: 10px 0; }
    }
</style>
{% endblock %}
